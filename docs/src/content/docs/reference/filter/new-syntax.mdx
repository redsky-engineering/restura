---
title: Filter - New Syntax
description: Recommended compact filter syntax
---

import { Aside } from '@astrojs/starlight/components';

The new syntax provides a compact, readable way to filter data.

## Basic Format

```
(column,value)           # Implicit equality
(column,operator,value)  # Explicit operator
```

## Operators

| Operator  | SQL Equivalent  | Description                           | Example               |
| --------- | --------------- | ------------------------------------- | --------------------- |
| _(none)_  | `=`             | Equality (default)                    | `(status,ACTIVE)`     |
| `ne`      | `<>`            | Not equal                             | `(status,ne,DELETED)` |
| `gt`      | `>`             | Greater than                          | `(price,gt,100)`      |
| `gte`     | `>=`            | Greater than or equal                 | `(age,gte,18)`        |
| `lt`      | `<`             | Less than                             | `(stock,lt,10)`       |
| `lte`     | `<=`            | Less than or equal                    | `(score,lte,100)`     |
| `has`     | `ILIKE '%val%'` | Contains substring (case-insensitive) | `(name,has,test)`     |
| `sw`      | `ILIKE 'val%'`  | Starts with (case-insensitive)        | `(email,sw,admin)`    |
| `ew`      | `ILIKE '%val'`  | Ends with (case-insensitive)          | `(file,ew,.pdf)`      |
| `in`      | `IN (...)`      | Matches any value in set              | `(id,in,1\|2\|3)`     |
| `null`    | `IS NULL`       | Is null                               | `(deletedAt,null)`    |
| `notnull` | `IS NOT NULL`   | Is not null                           | `(createdAt,notnull)` |

Operators are **case-insensitive**: `GT`, `Gt`, `gt` all work identically.

## Column Paths

| Format                   | Description            | Example                      | SQL Output                             |
| ------------------------ | ---------------------- | ---------------------------- | -------------------------------------- |
| `column`                 | Single column          | `(status,ACTIVE)`            | `"status" = 'ACTIVE'`                  |
| `table.column`           | Table-qualified column | `(user.email,sw,admin)`      | `"user"."email"::text ILIKE 'admin%'`  |
| `table.column.jsonField` | JSON field access      | `(user.metadata.role,admin)` | `"user"."metadata"->>'role' = 'admin'` |

<Aside type="note">Column paths cannot exceed 3 parts. `a.b.c.d` is rejected.</Aside>

## Escaping Special Characters

| Character       | Escape Sequence | Example                 | Result                                 |
| --------------- | --------------- | ----------------------- | -------------------------------------- |
| `,` (comma)     | `\,`            | `(name,Doe\, John)`     | `"name" = 'Doe, John'`                 |
| `\|` (pipe)     | `\|`            | `(desc,has,A\|B)`       | `"desc"::text ILIKE '%A\|B%'`          |
| `\` (backslash) | `\\`            | `(path,sw,C:\\Windows)` | `"path"::text ILIKE E'C:\\\\Windows%'` |

Spaces do **not** require escaping:

**Filter:**

```
(name,has,John Doe)
```

**SQL:**

```sql
"name"::text ILIKE '%John Doe%'
```

## IN Operator Values

Use pipes (`|`) to separate multiple values:

**Example 1 - Filter:**

```
(id,in,1|2|3)
```

**SQL:**

```sql
"id" IN (1, 2, 3)
```

---

**Example 2 - Filter:**

```
(status,in,ACTIVE|PENDING|PROCESSING)
```

**SQL:**

```sql
"status" IN ('ACTIVE', 'PENDING', 'PROCESSING')
```

---

**Example 3 - Filter:**

```
(status,in,In Progress|On Hold)
```

**SQL:**

```sql
"status" IN ('In Progress', 'On Hold')
```

Escape literal pipes within values:

**Example 4 - Filter:**

```
(tags,in,red\|green|blue|yellow)
```

**SQL:**

```sql
"tags" IN ('red|green', 'blue', 'yellow')
```

## Logical Operators

| Operator | Description | Example         |
| -------- | ----------- | --------------- |
| `and`    | Logical AND | `(a,1)and(b,2)` |
| `or`     | Logical OR  | `(a,1)or(b,2)`  |

Operators are **case-insensitive**: `AND`, `And`, `and` all work identically.

### Chaining Multiple Conditions

**Example 1 - Filter:**

```
(a,1)and(b,2)and(c,3)
```

**SQL:**

```sql
"a" = 1 AND "b" = 2 AND "c" = 3
```

---

**Example 2 - Filter:**

```
(a,1)or(b,2)or(c,3)
```

**SQL:**

```sql
"a" = 1 OR "b" = 2 OR "c" = 3
```

---

**Example 3 - Filter:**

```
(a,1)and(b,2)or(c,3)
```

**SQL:**

```sql
"a" = 1 AND "b" = 2 OR "c" = 3
```

## Negation

Prefix expressions with `!` to negate:

**Example 1 - Filter:**

```
!(status,DELETED)
```

**SQL:**

```sql
NOT ("status" = 'DELETED')
```

---

**Example 2 - Filter:**

```
!(a,1)and(b,2)
```

**SQL:**

```sql
NOT ("a" = 1) AND ("b" = 2)
```

---

**Example 3 - Filter:**

```
(a,1)and!(b,2)
```

**SQL:**

```sql
("a" = 1) AND NOT ("b" = 2)
```

---

**Example 4 - Filter:**

```
!(a,1)and!(b,2)
```

**SQL:**

```sql
NOT ("a" = 1) AND NOT ("b" = 2)
```

## Grouping

Use parentheses to control precedence:

**Example 1 - Filter:**

```
((a,1)or(b,2))
```

**SQL:**

```sql
(("a" = 1) OR ("b" = 2))
```

---

**Example 2 - Filter:**

```
((a,1)or(b,2))and((c,3)or(d,4))
```

**SQL:**

```sql
(("a" = 1) OR ("b" = 2)) AND (("c" = 3) OR ("d" = 4))
```

Negate entire groups:

**Example 3 - Filter:**

```
!((a,1)or(b,2))
```

**SQL:**

```sql
NOT (("a" = 1) OR ("b" = 2))
```

---

**Example 4 - Filter:**

```
((a,1)or(b,2))and!((c,3)or(d,4))
```

**SQL:**

```sql
(("a" = 1) OR ("b" = 2)) AND NOT (("c" = 3) OR ("d" = 4))
```

<Aside type="note">Maximum nesting depth is 1. Expressions like `(((a,1)or(b,2))and(c,3))` are rejected.</Aside>

## Whitespace

Whitespace is allowed around logical operators and after commas:

**Example 1 - Filter:**

```
(a,1) and (b,2)
```

**SQL:**

```sql
"a" = 1 AND "b" = 2
```

---

**Example 2 - Filter:**

```
(status, ACTIVE)
```

**SQL:**

```sql
"status" = 'ACTIVE'
```

---

**Example 3 - Filter:**

```
(price, gt, 100)
```

**SQL:**

```sql
"price" > 100
```

Whitespace within values is preserved:

**Example 4 - Filter:**

```
(name,John Doe)
```

**SQL:**

```sql
"name" = 'John Doe'
```

---

**Example 5 - Filter:**

```
(title,has,hello world)
```

**SQL:**

```sql
"title"::text ILIKE '%hello world%'
```
